
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>jjmodel.iof &#8212; jjmodel 0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for jjmodel.iof</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Fri Jun 26 15:48:28 2020</span>

<span class="sd">@author: skevja</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span> <span class="k">as</span> <span class="nn">sh</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> 
<span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">localpath</span>
<span class="kn">from</span> <span class="nn">.tools</span> <span class="kn">import</span> <span class="n">resave_parameters</span>


<div class="viewcode-block" id="dir_tree"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.dir_tree">[docs]</a><span class="k">def</span> <span class="nf">dir_tree</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds an output directory tree (name suffix of the main output directory </span>
<span class="sd">    can be specified in the parameter file).</span>
<span class="sd">     </span>
<span class="sd">    :param p: Set of model parameters from the parameter file. </span>
<span class="sd">    :type p: namedtuple</span>
<span class="sd">    :param make: Optional. If True, the directory tree is created, </span>
<span class="sd">        otherwise only all the folder names are defined. </span>
<span class="sd">    :type make: boolean</span>
<span class="sd">    </span>
<span class="sd">    :return: Directory tree for the model output.</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">run_mode</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">Rdirmain</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Rsun&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">out_dir</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Rname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">)))</span>
        <span class="n">Rdirmain</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">Rname</span><span class="p">,</span><span class="s1">&#39;_dR&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">out_dir</span><span class="p">))))</span>
    
    <span class="n">T</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Rdirmain</span>
    
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;dens&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;dens&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;denstab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;densplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;dens&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;dens&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;maps&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;maps&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;mapstab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;mapsplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;maps&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;maps&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;hess&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;hess&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;hesstab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;hessplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;hess&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;hess&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;fi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;fi&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;fitab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fiplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fi&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fi&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;agetab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;ageplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;inp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;inp&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inpplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inp&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inp&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;height&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heightplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;kin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;kinem&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kinplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kin&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kin&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;met&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;met&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;mettab&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;metplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;met&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;met&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;stat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;stat&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;pop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span><span class="s1">&#39;pop&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;pop&#39;</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;popplt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;pop&#39;</span><span class="p">],</span><span class="s1">&#39;plt&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;poprctab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">],</span><span class="s1">&#39;rc&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;popcephtab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">],</span><span class="s1">&#39;ceph&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;popatab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">],</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;popftab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">],</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;popgdwtab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">],</span><span class="s1">&#39;gdw&#39;</span><span class="p">)</span>
    <span class="n">T</span><span class="p">[</span><span class="s1">&#39;popkdwtab&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;poptab&#39;</span><span class="p">],</span><span class="s1">&#39;kdw&#39;</span><span class="p">)</span>
    
    <span class="n">dirs_level1</span><span class="p">,</span> <span class="n">dirs_level2</span><span class="p">,</span> <span class="n">dirs_level3</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> 
    <span class="n">keys_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys_list</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">T</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;plt&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">T</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]]):</span>
            <span class="n">dirs_level1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;pop&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">T</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]]:</span>
                <span class="n">dirs_level2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dirs_level3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                
    <span class="k">if</span> <span class="s1">&#39;make&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;make&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">out_mode</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">])</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results of this run will be saved to already existing folder&#39;</span><span class="p">,</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs_level1</span><span class="p">:</span> 
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs_level2</span><span class="p">:</span> 
                    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs_level3</span><span class="p">:</span> 
                    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results of this run will be saved to&#39;</span><span class="p">,</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">])</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                <span class="n">sh</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Results of this run will be saved to &#39;</span><span class="p">,</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">],</span>
                  <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Warning: Old results will be overwritten (out_mode=0 in parameter file, &#39;</span>
                    <span class="o">+</span><span class="s1">&#39;change to 1 for a unique name of output directory).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs_level1</span><span class="p">:</span> 
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs_level2</span><span class="p">:</span> 
                <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs_level3</span><span class="p">:</span> 
                <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>   
        
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pkey</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">resave_parameters</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;parameters&#39;</span><span class="p">),</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;stat&#39;</span><span class="p">],</span><span class="s1">&#39;parameters&#39;</span><span class="p">),</span><span class="n">p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resave_parameters</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;parameters&#39;</span><span class="p">),</span>
                               <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;sfrd_peaks_parameters&#39;</span><span class="p">)],</span>
                              <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;stat&#39;</span><span class="p">],</span><span class="s1">&#39;parameters&#39;</span><span class="p">),</span>
                               <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;stat&#39;</span><span class="p">],</span><span class="s1">&#39;sfrd_peaks_parameters&#39;</span><span class="p">)],</span><span class="n">p</span><span class="p">)</span>
            
        <span class="c1"># sh.copyfile(os.path.join(&#39;.&#39;,&#39;parameters&#39;),os.path.join(T[&#39;stat&#39;],&#39;parameters&#39;))</span>
        <span class="c1"># if p.pkey!=0:</span>
        <span class="c1">#     sh.copyfile(os.path.join(&#39;.&#39;,&#39;sfrd_peaks_parameters&#39;),</span>
        <span class="c1">#                 os.path.join(T[&#39;stat&#39;],&#39;sfrd_peaks_parameters&#39;))</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Output directory tree created.&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">T</span></div>


<div class="viewcode-block" id="tab_sorter"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.tab_sorter">[docs]</a><span class="k">def</span> <span class="nf">tab_sorter</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sorts all kinds of the calculated quantities into the output subdirectories. </span>
<span class="sd">    </span>
<span class="sd">    :param name: Short name of the quantity.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param p: Set of model parameters from the parameter file. </span>
<span class="sd">    :type p: namedtuple</span>
<span class="sd">    :param T: Output directory tree (created by :func:`jjmodel.iof.dir_tree`).</span>
<span class="sd">    :type T: dict</span>
<span class="sd">    :param R: Optional. Galactocentric distance, kpc. Must be specified for the vertical </span>
<span class="sd">        density profiles (**name** = ``&#39;rhoz&#39;``), vertical force (``&#39;Kz&#39;``), </span>
<span class="sd">        contributions of the additional peaks to the thin-disk SFR (``&#39;Fp&#39;``), </span>
<span class="sd">        and peaks&#39; scale heights (``&#39;Hdp&#39;``). </span>
<span class="sd">    :type R: scalar </span>
<span class="sd">    :param print: Optional. If True, the full list of names is printed. </span>
<span class="sd">    :type print: boolean </span>

<span class="sd">    :return: Path to the directory where the quantity given by **name** will be saved</span>
<span class="sd">        as txt table. Or, if **print** is True, none. </span>
<span class="sd">    :rtype: str or none</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">namespace</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SR&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;Sigma.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;SFRd&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;SFR_d.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;NSFRd&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;NSFR_d.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;SFRt&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;SFR_t.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;NSFRt&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;NSFR_t.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;SFRtot&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;SFR_tot.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;NSFRtot&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;NSFR_tot.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;gd&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;g_d.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;gt&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;g_t.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;AMRt&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;AMR_t.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;AMRd&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;AMR_d.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;AMRtot&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;AMR_tot.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Hg1&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;H_g1.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Hg2&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;H_g2.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;H2&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">localpath</span><span class="p">,</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="s1">&#39;gas&#39;</span><span class="p">,</span><span class="s1">&#39;H2.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;HI&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">localpath</span><span class="p">,</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="s1">&#39;gas&#39;</span><span class="p">,</span><span class="s1">&#39;HI.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;SFRd0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SFR_d_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;SFRt0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SFR_t_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;SFRtot0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SFR_tot_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;NSFRd0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;NSFR_d_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;NSFRtot0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;NSFR_tot_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;gd0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;g_d_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;AMRd0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;AMR_d_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;AVR&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;AVR.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Sige&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;Sige.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Sigt&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;Sig_t.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Sigg1&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;Sig_g1.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Sigg2&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;Sig_g2.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Heffd&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;Heff_d.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Heffd0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Heff_d_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Hd&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;H_d.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Phi&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fitab&#39;</span><span class="p">],</span><span class="s1">&#39;Fiz.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Hsh&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;H_sh.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Hdh&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;H_dh.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Ht&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;H_t.txt&#39;</span><span class="p">),</span>
                 <span class="s1">&#39;Kz0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fitab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Kz_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;AVR0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;AVR_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Hd0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H_d_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Ht0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H_t_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Hsh0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H_sh_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Hdh0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H_dh_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Phi0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fitab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Fiz_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;rhoz0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;denstab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Rho_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Hdp0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H_dp_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">))),</span>
                 <span class="s1">&#39;Fp0&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;F_dp_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;.txt&#39;</span><span class="p">)))</span>
                 <span class="p">}</span>
    
    <span class="k">if</span> <span class="s1">&#39;print&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;print&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span> 
        <span class="k">if</span> <span class="s1">&#39;R&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">namespace</span><span class="p">[</span><span class="s1">&#39;rhoz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;denstab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Rhoz_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]),</span><span class="s1">&#39;.txt&#39;</span><span class="p">)))</span>
            <span class="n">namespace</span><span class="p">[</span><span class="s1">&#39;Kz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;fitab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Kz_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]),</span><span class="s1">&#39;.txt&#39;</span><span class="p">)))</span>
            <span class="n">namespace</span><span class="p">[</span><span class="s1">&#39;Fp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;inptab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;F_dp_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]),</span><span class="s1">&#39;.txt&#39;</span><span class="p">)))</span>
            <span class="n">namespace</span><span class="p">[</span><span class="s1">&#39;Hdp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;heighttab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H_dp_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]),</span><span class="s1">&#39;.txt&#39;</span><span class="p">)))</span>
            
        <span class="k">return</span> <span class="n">namespace</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    
    <span class="k">else</span><span class="p">:</span> 
        <span class="nb">print</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>
        
    
 
    
<div class="viewcode-block" id="tab_reader"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.tab_reader">[docs]</a><span class="k">def</span> <span class="nf">tab_reader</span><span class="p">(</span><span class="n">names</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads data from the output directory tree.</span>
<span class="sd">    </span>
<span class="sd">    :param names: Names of the tables to read. Names of the quantites are the same </span>
<span class="sd">        as for :func:`jjmodel.iof.tab_sorter`. Also, if **tab** is True, </span>
<span class="sd">        **names** can refer to stellar populations: </span>
<span class="sd">            </span>
<span class="sd">            - ``&#39;ceph&#39;`` - Cepheids Type I (selected by :meth:`jjmodel.analysis.GetPopulations.cepheids_type1`)</span>
<span class="sd">            - ``&#39;a&#39;`` - A stars (:meth:`jjmodel.analysis.GetPopulations.a_stars`)</span>
<span class="sd">            - ``&#39;f&#39;`` - F stars (:meth:`jjmodel.analysis.GetPopulations.f_stars`)</span>
<span class="sd">            - ``&#39;rc+&#39;`` - RC stars, contaminated by HGB (:meth:`jjmodel.analysis.GetPopulations.rc_simple`)</span>
<span class="sd">            - ``&#39;rc&#39;`` - RC stars, clean (:meth:`jjmodel.analysis.GetPopulations.rc_clean`)</span>
<span class="sd">            - ``&#39;gdw&#39;`` - G dwarfs (:meth:`jjmodel.analysis.GetPopulations.g_dwarfs`)</span>
<span class="sd">            - ``&#39;kdw&#39;`` - K dwarfs (:meth:`jjmodel.analysis.GetPopulations.k_dwarfs`)</span>
<span class="sd">            - ``&#39;mdw&#39;`` - M dwarfs (:meth:`jjmodel.analysis.GetPopulations.m_dwarfs`)</span>
<span class="sd">            - ``&#39;ssp&#39;`` - full stellar assembly table</span>
<span class="sd">            </span>
<span class="sd">    :type names: list</span>
<span class="sd">    :param p: Set of model parameters from the parameter file. </span>
<span class="sd">    :type p: namedtuple</span>
<span class="sd">    :param T: Output directory tree (created by :func:`jjmodel.iof.dir_tree`).</span>
<span class="sd">    :type T: dict</span>
<span class="sd">    :param tab: If True, tables with stellar assemblies will be read (csv tables). </span>
<span class="sd">        Otherwise some model produced txt tables are read. </span>
<span class="sd">    :type tab: boolean </span>
<span class="sd">    :param mode_iso: Optional. Defines which set of isochrones is used, can be ``&#39;Padova&#39;``, ``&#39;MIST&#39;``, or ``&#39;BaSTI&#39;``. </span>
<span class="sd">        If not specified, Padova is the default isochrone set. </span>
<span class="sd">    :type mode_iso: str </span>
<span class="sd">    :param R: Optional. Galactocentric distance, kpc. Must be specified for the vertical </span>
<span class="sd">        density profiles (**name** = ``&#39;rhoz&#39;``), vertical force (``&#39;Kz&#39;``), </span>
<span class="sd">        contributions of the additional peaks to the thin-disk SFR (``&#39;Fp&#39;``), </span>
<span class="sd">        and peaks&#39; scale heights (``&#39;Hdp&#39;``). Also, has to be given if **tab** is True. </span>
<span class="sd">    :type R: scalar </span>
<span class="sd">    </span>
<span class="sd">    :return: Data tables. </span>
<span class="sd">    :rtype: list[array-likes]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;tab&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">Pn</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="s1">&#39;rc&#39;</span><span class="p">:</span><span class="s1">&#39;RC&#39;</span><span class="p">,</span><span class="s1">&#39;rc+&#39;</span><span class="p">:</span><span class="s1">&#39;RC+&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;gdw&#39;</span><span class="p">:</span><span class="s1">&#39;Gdw&#39;</span><span class="p">,</span><span class="s1">&#39;kdw&#39;</span><span class="p">:</span><span class="s1">&#39;Kdw&#39;</span><span class="p">,</span><span class="s1">&#39;rrl&#39;</span><span class="p">:</span><span class="s1">&#39;RRL&#39;</span><span class="p">,</span><span class="s1">&#39;ceph&#39;</span><span class="p">:</span><span class="s1">&#39;Ceph&#39;</span><span class="p">}</span>
        <span class="n">pn</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;rc&#39;</span><span class="p">:</span><span class="s1">&#39;rc&#39;</span><span class="p">,</span><span class="s1">&#39;rc+&#39;</span><span class="p">:</span><span class="s1">&#39;rc&#39;</span><span class="p">,</span>
              <span class="s1">&#39;gdw&#39;</span><span class="p">:</span><span class="s1">&#39;gdw&#39;</span><span class="p">,</span><span class="s1">&#39;kdw&#39;</span><span class="p">:</span><span class="s1">&#39;kdw&#39;</span><span class="p">,</span><span class="s1">&#39;rrl&#39;</span><span class="p">:</span><span class="s1">&#39;rrl&#39;</span><span class="p">,</span><span class="s1">&#39;ceph&#39;</span><span class="p">:</span><span class="s1">&#39;ceph&#39;</span><span class="p">}</span>
        
        <span class="k">if</span> <span class="n">names</span><span class="o">==</span><span class="s1">&#39;ssp&#39;</span><span class="p">:</span>
            <span class="n">savedir</span> <span class="o">=</span> <span class="s1">&#39;poptab&#39;</span>
            <span class="n">tabname</span> <span class="o">=</span> <span class="s1">&#39;SSP&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savedir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="n">pn</span><span class="p">[</span><span class="n">names</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">))</span>
            <span class="n">tabname</span> <span class="o">=</span> <span class="n">Pn</span><span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_iso&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">mode_iso</span> <span class="o">=</span> <span class="s1">&#39;Padova&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mode_iso</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_iso&#39;</span><span class="p">]</span>
        <span class="n">readpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">savedir</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">tabname</span><span class="p">,</span><span class="s1">&#39;_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">],</span>
                                                    <span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;.csv&#39;</span><span class="p">)))</span> 
        <span class="n">tables</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">readpath</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span><span class="o">.</span><span class="n">T</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">tables</span></div>


<span class="k">def</span> <span class="nf">hdp_reader</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schale heights for peaks&#39; subpopulations in the form of list of lists, [[]]. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">npeak</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">sigp</span><span class="p">)</span>
    
    <span class="n">only_local</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">r_scalar</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">r_scalar</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">R</span><span class="o">==</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">:</span>
            <span class="n">only_local</span> <span class="o">=</span> <span class="kc">True</span>
    
    <span class="k">if</span> <span class="n">r_scalar</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">npeak</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="n">tab_reader</span><span class="p">([</span><span class="s1">&#39;Hdp0&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sigp</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hdp</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hdp</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="n">tab_reader</span><span class="p">([</span><span class="s1">&#39;Hdp0&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sigp</span> <span class="o">=</span> <span class="n">Hdp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="n">Hdp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">npeak</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="n">tab_reader</span><span class="p">([</span><span class="s1">&#39;Hdp&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">R</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sigp</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hdp</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hdp</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="n">tab_reader</span><span class="p">([</span><span class="s1">&#39;Hdp&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">R</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sigp</span> <span class="o">=</span> <span class="n">Hdp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">Hdp</span> <span class="o">=</span> <span class="n">Hdp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Hdp</span> <span class="o">=</span> <span class="p">[</span><span class="n">tab_reader</span><span class="p">([</span><span class="s1">&#39;Hdp&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">radius</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">radius</span> <span class="ow">in</span> <span class="n">R</span><span class="p">]</span>
       
        <span class="k">if</span> <span class="n">npeak</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">sigp</span> <span class="o">=</span> <span class="p">[[</span><span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">Hdp</span><span class="p">]</span>
            <span class="n">Hdp</span> <span class="o">=</span> <span class="p">[[</span><span class="n">table</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">Hdp</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sigp</span> <span class="o">=</span> <span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">Hdp</span><span class="p">]</span>
            <span class="n">Hdp</span> <span class="o">=</span> <span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">Hdp</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">sigp</span><span class="p">,</span> <span class="n">Hdp</span><span class="p">)</span>
    


<div class="viewcode-block" id="TabSaver"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver">[docs]</a><span class="k">class</span> <span class="nc">TabSaver</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sorts and saves calculated quantities into the output subfolders. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
<div class="viewcode-block" id="TabSaver.__init__"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialization of the class instance. </span>
<span class="sd">        </span>
<span class="sd">        :param p: Set of model parameters from the parameter file. </span>
<span class="sd">        :type p: namedtuple</span>
<span class="sd">        :param a: Collection of the fixed model parameters, useful quantities, and arrays.</span>
<span class="sd">        :type a: namedtuple</span>
<span class="sd">        :param number: Optional. If True, calculated quantity is (or is weighted by) the spatial number </span>
<span class="sd">            density of stars in :math:`\mathrm{number \ pc^{-3}}`, </span>
<span class="sd">            not matter density in :math:`\mathrm{M_\odot \ pc^{-3}}`. </span>
<span class="sd">        :type number: boolean</span>
<span class="sd">        :param sigma: Optional. If True, the result is (or is weighted by) surface density </span>
<span class="sd">            in :math:`\mathrm{M_\odot \ pc^{-2}}`, </span>
<span class="sd">            otherwise the midplane mass density in :math:`\mathrm{M_\odot \ pc^{-3}}` is used. </span>
<span class="sd">            In combination with **number** = True, uses the *number* surface density in </span>
<span class="sd">            :math:`\mathrm{number \ pc^{-2}}`.</span>
<span class="sd">        :type sigma: boolean</span>
<span class="sd">        :param fig: Optional. If True, a plot will be saved. By default, class methods save a table.  </span>
<span class="sd">        :type fig: boolean</span>
<span class="sd">        :param save_format: Optional. Format of the figure. Can be used only when **fig** is True. </span>
<span class="sd">        :type save_format: str</span>
<span class="sd">        :param normalized: Optional. Applicable in case if vertical density profiles will be saved. </span>
<span class="sd">            If True, the profiles are normalized at each height  </span>
<span class="sd">            on the total density at this height. Also the file name will start from </span>
<span class="sd">            ``&#39;NRhoz&#39;`` instead of ``&#39;Rhoz&#39;``. </span>
<span class="sd">        :type normalized: boolean</span>
<span class="sd">        :param cumulative: Optional. Applicable to density profiles, age and metallicity distributions. </span>
<span class="sd">            If True, the normalized cumulative quantities are saved. In general, ``&#39;C&#39;`` is added in front </span>
<span class="sd">            of a standard file name; in case of density profiles, file will be called ``&#39;NCMassz&#39;``. </span>
<span class="sd">        :type cumulative: boolean</span>
<span class="sd">        :param mode_pop: Optional. Name of stellar population. Can be a pre-defined one </span>
<span class="sd">            (``&#39;a&#39;``, ``&#39;f&#39;``, ``&#39;ceph&#39;``, ``&#39;rc&#39;``, ``&#39;rc+&#39;``, ``&#39;gdw&#39;``, ``&#39;kdw&#39;``, ``&#39;mdw&#39;``) or custom </span>
<span class="sd">            (if it was selected and saved as a table in advance). Adds a suffix with the name of </span>
<span class="sd">            population to the standard file name. </span>
<span class="sd">        :type mode_pop: str</span>
<span class="sd">        :param number: Optional. If True, this indicates that the quantity to save was calculated with </span>
<span class="sd">            the help of stellar assembly tables (contains stellar number densities or something weighted </span>
<span class="sd">            by them). Usually adds a suffix ``&#39;(nw)&#39;`` (stands for &#39;number-weighted&#39;) to the standard file name. </span>
<span class="sd">            Otherwise, the suffix is ``&#39;(rw)&#39;`` (&#39;rho&#39;, i.e., &#39;density-weighted&#39;). </span>
<span class="sd">        :type number: boolean</span>
<span class="sd">        :param between: Optional. If True, the output quantity corresponds to the age intervals, not  </span>
<span class="sd">            to individual single mono-age subpopulations. Applicable to methods with parameter **ages**. </span>
<span class="sd">            If False, a suffix ``&#39;sgl&#39;`` will be added to the standard file name </span>
<span class="sd">            (stands for &#39;single-age populations&#39;).  </span>
<span class="sd">        :type between: boolean</span>
<span class="sd">        :param dz: Optional. Vertical resolution, pc. Applicable to methods which save R-z maps, </span>
<span class="sd">            adds a suffix ``&#39;dz&#39;`` with **z** in kpc. </span>
<span class="sd">        :type dz: scalar</span>
<span class="sd">        :param R: Optional. Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param ages: Set of age bins, Gyr. If specified, a suffix ``&#39;age&#39;`` with the range of ages </span>
<span class="sd">            (or min age, max age, and step) is added to the file name. </span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        :param mets: Set of metallicity bins. If specified, a suffix ``&#39;FeH&#39;`` with the range of metallicities </span>
<span class="sd">            (or min metallicity, max metallicity, and step) is added to the file name. </span>
<span class="sd">        :type mets: array-like</span>
<span class="sd">        :param vln: Optional. A string with information about the volume. Applicable to methods </span>
<span class="sd">            which save Hess diagrams and stellar number densitites corresponding to some volume. </span>
<span class="sd">        :type vln: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="p">,</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="n">Q0</span> <span class="o">=</span> <span class="s1">&#39;Rho&#39;</span>
        <span class="n">Q1</span> <span class="o">=</span> <span class="s1">&#39;rho[Msun/pc^3]&#39;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="s1">&#39;density-weighted&#39;</span>
        <span class="n">w0</span> <span class="o">=</span> <span class="s1">&#39;rw&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;number&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">Q0</span> <span class="o">=</span> <span class="s1">&#39;N&#39;</span>  
            <span class="n">Q1</span> <span class="o">=</span> <span class="s1">&#39;N[1/pc^3]&#39;</span>
            <span class="n">w</span> <span class="o">=</span> <span class="s1">&#39;number-weighted&#39;</span>
            <span class="n">w0</span> <span class="o">=</span> <span class="s1">&#39;nw&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;sigma&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;number&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                <span class="n">Q0</span> <span class="o">=</span> <span class="s1">&#39;SigmaN&#39;</span>
                <span class="n">Q2</span> <span class="o">=</span> <span class="s1">&#39;N[1/pc^2]&#39;</span>
            <span class="k">else</span><span class="p">:</span>    
                <span class="n">Q0</span> <span class="o">=</span> <span class="s1">&#39;Sigma&#39;</span>
                <span class="n">Q2</span> <span class="o">=</span> <span class="s1">&#39;Sigma[Msun/pc^2]&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;number&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                <span class="n">Q2</span> <span class="o">=</span> <span class="s1">&#39;N[1/pc^3]&#39;</span>
            <span class="k">else</span><span class="p">:</span>    
                <span class="n">Q2</span> <span class="o">=</span> <span class="s1">&#39;rho[Msun/pc^3]&#39;</span>      
        <span class="bp">self</span><span class="o">.</span><span class="n">Q0</span> <span class="o">=</span> <span class="n">Q0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q1</span> <span class="o">=</span> <span class="n">Q1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q2</span> <span class="o">=</span> <span class="n">Q2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">w</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">w0</span> <span class="o">=</span> <span class="n">w0</span> 
                    <span class="c1">#tabname = tab_sorter(&#39;rctab&#39;,self.p,self.a.T,R=self.R,mode=mode_comp,mode_pop=&#39;rc&#39;) </span>
            <span class="c1">#rc_sample_tab.write(tabname,overwrite=True)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;d&#39;</span><span class="p">:</span><span class="s1">&#39;thin disk&#39;</span><span class="p">,</span><span class="s1">&#39;t&#39;</span><span class="p">:</span><span class="s1">&#39;thick disk&#39;</span><span class="p">,</span><span class="s1">&#39;sh&#39;</span><span class="p">:</span><span class="s1">&#39;stellar halo&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;dt&#39;</span><span class="p">:</span><span class="s1">&#39;total disk&#39;</span><span class="p">,</span><span class="s1">&#39;tot&#39;</span><span class="p">:</span><span class="s1">&#39;total disk + halo&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pn</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;rc&#39;</span><span class="p">:</span><span class="s1">&#39;rc&#39;</span><span class="p">,</span><span class="s1">&#39;rc+&#39;</span><span class="p">:</span><span class="s1">&#39;rc&#39;</span><span class="p">,</span><span class="s1">&#39;rc_compl&#39;</span><span class="p">:</span><span class="s1">&#39;rc&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;gdw&#39;</span><span class="p">:</span><span class="s1">&#39;gdw&#39;</span><span class="p">,</span><span class="s1">&#39;kdw&#39;</span><span class="p">:</span><span class="s1">&#39;kdw&#39;</span><span class="p">,</span><span class="s1">&#39;rrl&#39;</span><span class="p">:</span><span class="s1">&#39;rrl&#39;</span><span class="p">,</span><span class="s1">&#39;ceph&#39;</span><span class="p">:</span><span class="s1">&#39;ceph&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="s1">&#39;rc&#39;</span><span class="p">:</span><span class="s1">&#39;RC&#39;</span><span class="p">,</span><span class="s1">&#39;rc+&#39;</span><span class="p">:</span><span class="s1">&#39;RC+&#39;</span><span class="p">,</span><span class="s1">&#39;rc_compl&#39;</span><span class="p">:</span><span class="s1">&#39;RC_compl&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;gdw&#39;</span><span class="p">:</span><span class="s1">&#39;Gdw&#39;</span><span class="p">,</span><span class="s1">&#39;kdw&#39;</span><span class="p">:</span><span class="s1">&#39;Kdw&#39;</span><span class="p">,</span><span class="s1">&#39;rrl&#39;</span><span class="p">:</span><span class="s1">&#39;RRL&#39;</span><span class="p">,</span><span class="s1">&#39;ceph&#39;</span><span class="p">:</span><span class="s1">&#39;Ceph&#39;</span><span class="p">}</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;tab&#39;</span><span class="p">,</span> <span class="s1">&#39;.txt&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dir2</span> <span class="o">=</span> <span class="s1">&#39;plt&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;save_format&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;save_format&#39;</span><span class="p">]</span></div>
            
<div class="viewcode-block" id="TabSaver.rhoz_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rhoz_save">[docs]</a>    <span class="k">def</span> <span class="nf">rhoz_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">R</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical density profiles to the subfolder ``a.T[&#39;dens&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Rhoz&#39;``, ``&#39;NRohz&#39;``, or ``&#39;NCMassz&#39;`` (depending on the class </span>
<span class="sd">        instance *kwargs*). </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical density profiles, where the first column is ``a.z`` and </span>
<span class="sd">            the rest are density profiles of the thin disk, thick disk, molecular gas, atomic gas, DM halo, </span>
<span class="sd">            and stellar halo. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;Rhoz&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;normalized&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;normalized&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;NRhoz&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;cumulative&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cumulative&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;NCMassz&#39;</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">filename</span><span class="p">,</span><span class="s1">&#39;_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">)))</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">head_rhoz</span> <span class="o">=</span> <span class="s1">&#39;|z|[pc], Q_thin.d, Q_mol.gas, Q_atom.gas, Q_thick.d, Q_DM, Q_st.halo with Q = &#39;</span>
            <span class="k">if</span> <span class="p">((</span><span class="s1">&#39;normalized&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;normalized&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">)</span> <span class="ow">or</span>
                <span class="p">(</span><span class="s1">&#39;cumulative&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cumulative&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">)):</span>
                <span class="k">if</span> <span class="s1">&#39;normalized&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;normalized&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                    <span class="n">head_rhoz</span> <span class="o">+=</span> <span class="s1">&#39;rho(|z|)_i/rho_tot(|z|)&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;cumulative&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cumulative&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                    <span class="n">head_rhoz</span> <span class="o">+=</span> <span class="s1">&#39;Mass(|z|)_i/Mass_tot(|z|)&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">head_rhoz</span> <span class="o">+=</span> <span class="s1">&#39;rho(|z|)_i[Msun/pc^3]&#39;</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">profiles</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="n">head_rhoz</span><span class="p">)</span></div>
            
            
<div class="viewcode-block" id="TabSaver.fi_iso_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.fi_iso_save">[docs]</a>    <span class="k">def</span> <span class="nf">fi_iso_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical density profiles to the subfolder ``a.T[&#39;dens&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Rhoz&#39;``, ``&#39;NRohz&#39;``, or ``&#39;NCMassz&#39;`` (depending on the class </span>
<span class="sd">        instance *kwargs*). </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical density profiles, where the first column is ``a.z`` and </span>
<span class="sd">            the rest are density profiles of the thin disk, thick disk, molecular gas, atomic gas, DM halo, </span>
<span class="sd">            and stellar halo. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;FiRz_iso&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;fi&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;fi&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                   <span class="n">profiles</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &#39;</span><span class="p">,</span><span class="s1">&#39;Phi[m^2/s^2] at R = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span><span class="s1">&#39;] kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>  </div>
                       

<div class="viewcode-block" id="TabSaver.rot_curve_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rot_curve_save">[docs]</a>    <span class="k">def</span> <span class="nf">rot_curve_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves rotation curve to the subfolder ``a.T[&#39;kintab&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Vc_R&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: The first column is Galactocentric distance R, kpc. </span>
<span class="sd">            Other columns contain rotation velocity (:math:`\mathrm{km \ s^{-1}}`) </span>
<span class="sd">            in the following order: total, bulge, thin disk, thick disk, molecular gas, </span>
<span class="sd">            atomic gas, DM halo, stellar halo. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;kintab&#39;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Vc_R&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                   <span class="n">profiles</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], Q_tot, Q_bulge, Vc_thin.d, Q_thick.d, Q_mol.g, &#39;</span><span class="o">+</span>\
                                        <span class="s1">&#39;Q_at.g, Q_DM, Q_st.halo with Q = Vc[km/s]&#39;</span><span class="p">)</span>  </div>

            
<div class="viewcode-block" id="TabSaver.poptab_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.poptab_save">[docs]</a>    <span class="k">def</span> <span class="nf">poptab_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">mode_pop_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves stellar assembly table to the subfolder ``a.T[&#39;poptab&#39;]`` . </span>
<span class="sd">        </span>
<span class="sd">        :param table: Table with stellar assemblies, output of </span>
<span class="sd">            :func:`jjmodel.populations.stellar_assemblies_iso` or methods of </span>
<span class="sd">            :class:`jjmodel.analysis.GetPopulations`.</span>
<span class="sd">        :type table: astropy table</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param mode_iso: Defines which set of isochrones is used, can be ``&#39;Padova&#39;``, ``&#39;MIST&#39;``, </span>
<span class="sd">            or ``&#39;BaSTI&#39;``. Adds suffix ``&#39;_&#39;+mode_iso`` to the file name. </span>
<span class="sd">        :type mode_iso: str </span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param mode_pop_name: Short name of the population (see :func:`jjmodel.iof.tab_reader`) </span>
<span class="sd">            or any custom name for the table. </span>
<span class="sd">        :type mode_pop_name: str </span>
<span class="sd">                </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">savedir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">pn</span><span class="p">[</span><span class="n">mode_pop_name</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">))</span>
            <span class="n">tabname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="n">mode_pop_name</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span> 
            <span class="n">savedir</span> <span class="o">=</span> <span class="s1">&#39;poptab&#39;</span>
            <span class="n">tabname</span> <span class="o">=</span> <span class="n">mode_pop_name</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">savedir</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">tabname</span><span class="p">,</span><span class="s1">&#39;_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span>
                                                           <span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;.csv&#39;</span><span class="p">)))</span>                                                    
        <span class="n">table</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">savepath</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
                                           
    
<div class="viewcode-block" id="TabSaver.rhoz_monoage_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rhoz_monoage_save">[docs]</a>    <span class="k">def</span> <span class="nf">rhoz_monoage_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">ages</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical mono-age density profiles to the subfolder ``a.T[&#39;dens&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Rho&#39;``, ``&#39;N&#39;``,``&#39;Sigma&#39;``, or ``&#39;SigmaN&#39;`` </span>
<span class="sd">        (depending on parameters **sigma** and **number** in the class instance *kwargs*). </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical density profiles, where the first column is ``a.z`` and </span>
<span class="sd">            the rest are density profiles of the mono-age subpopulations (bins) corresponding to </span>
<span class="sd">            an age grid. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param ages: Set of age bins, Gyr. Adds suffix ``&#39;_age&#39;`` with the min-max age and age step. </span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>    
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Q0</span><span class="p">,</span><span class="s1">&#39;z_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39;_age[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>                                                                           
                                        <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">))),</span><span class="s1">&#39;]&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;between&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;between&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;sgl&#39;</span>
        <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">Q1</span><span class="p">,</span><span class="s1">&#39; (&#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for ages = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] Gyr with step = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span>
                               <span class="s1">&#39; Gyr at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>                               </div>
        
                                   
<div class="viewcode-block" id="TabSaver.rhoz_monomet_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rhoz_monomet_save">[docs]</a>    <span class="k">def</span> <span class="nf">rhoz_monomet_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">mets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical mono-metallicity density profiles to the subfolder ``a.T[&#39;dens&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Rho&#39;``, ``&#39;N&#39;``,``&#39;Sigma&#39;``, or ``&#39;SigmaN&#39;`` </span>
<span class="sd">        (depending on parameters **sigma** and **number** in the class instance *kwargs*). </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical density profiles, where the first column is ``a.z`` and </span>
<span class="sd">            the rest are density profiles of the mono-metallicity subpopulations (bins) corresponding to </span>
<span class="sd">            the metallicity grid. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param mets: Set of metallicity bins. Adds suffix ``&#39;_FeH&#39;`` with the min-max metallicity and </span>
<span class="sd">            step in metallicity. </span>
<span class="sd">        :type mets: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Q0</span><span class="p">,</span><span class="s1">&#39;z_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span>
                                        <span class="s1">&#39;_FeH[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span>
                                         <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>                   
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">Q1</span><span class="p">,</span><span class="s1">&#39; (&#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for [Fe/H] = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;] with step = &#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39; at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span></div>
                
        
<div class="viewcode-block" id="TabSaver.rhor_monoage_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rhor_monoage_save">[docs]</a>    <span class="k">def</span> <span class="nf">rhor_monoage_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">,</span><span class="n">ages</span><span class="p">):</span>        
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial mono-age density profiles to the subfolder ``a.T[&#39;dens&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Rho&#39;``, ``&#39;N&#39;``,``&#39;Sigma&#39;``, or ``&#39;SigmaN&#39;`` </span>
<span class="sd">        (depending on parameters **sigma** and **number** in the class instance *kwargs*). </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Density profiles, where the first column is ``a.R`` and </span>
<span class="sd">            the rest are density profiles of the mono-age subpopulations (bins) corresponding to </span>
<span class="sd">            an age grid. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights, pc. Suffix ``&#39;_z&#39;`` with the given values  </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param ages: Set of age bins, Gyr. Adds suffix ``&#39;_age&#39;`` with the min-max age and age step. </span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Q0</span><span class="p">,</span><span class="s1">&#39;R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span>
                                         <span class="s1">&#39;]_age[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                         <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]&#39;</span><span class="p">))</span>  
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;between&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;between&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;sgl&#39;</span>   
        <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>  
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>                                        
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">Q2</span><span class="p">,</span><span class="s1">&#39; (&#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for ages = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] Gyr with step = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span>
                               <span class="s1">&#39; Gyr at z = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span></div>
                                                                     

<div class="viewcode-block" id="TabSaver.rhor_monomet_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rhor_monomet_save">[docs]</a>    <span class="k">def</span> <span class="nf">rhor_monomet_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">,</span><span class="n">mets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial mono-metallicity density profiles to the subfolder ``a.T[&#39;dens&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Rho&#39;``, ``&#39;N&#39;``,``&#39;Sigma&#39;``, or ``&#39;SigmaN&#39;`` </span>
<span class="sd">        (depending on parameters **sigma** and **number** in the class instance *kwargs*). </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Density profiles, where the first column is ``a.R`` and </span>
<span class="sd">            the rest are density profiles of the mono-metallicity subpopulations (bins) corresponding to </span>
<span class="sd">            metallicity grid. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights, pc. Suffix ``&#39;_z&#39;`` with the given values  </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param mets: Set of metallicity bins. Adds suffix ``&#39;_FeH&#39;`` with the min-max metallicity </span>
<span class="sd">            and step in metallicity. </span>
<span class="sd">        :type mets: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Q0</span><span class="p">,</span><span class="s1">&#39;R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span>
                                         <span class="s1">&#39;]_FeH[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                         <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>   
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>                                                   
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;dens&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">Q2</span><span class="p">,</span><span class="s1">&#39; (&#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for [Fe/H] = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;] with step = &#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span>
                               <span class="s1">&#39; at z = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span></div>
        
                   
<div class="viewcode-block" id="TabSaver.agez_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.agez_save">[docs]</a>    <span class="k">def</span> <span class="nf">agez_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical age profile to the subfolder ``a.T[&#39;age&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Age&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical age profiles. Can include two tables - profiles at the different R </span>
<span class="sd">            and at ``p.Rsun``, or a single table with the local profile. Tables contain only age profiles,</span>
<span class="sd">            without the vertical grid column ``a.z``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        
        <span class="n">only_local</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;R&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">:</span>
            <span class="n">only_local</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Age(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)z_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Age(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)z_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
                
        <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">agezr0</span> <span class="o">=</span> <span class="n">profiles</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">agezr</span><span class="p">,</span><span class="n">agezr0</span> <span class="o">=</span> <span class="n">profiles</span>
            
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">agezr</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>                   
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &lt;age&gt;[Gyr] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span>
                                       <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span><span class="s1">&#39;] kpc with step = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">agezr0</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>                   
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &lt;age&gt;[Gyr] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = &#39;</span><span class="p">,</span>
                                   <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span></div>
                                       
        
<div class="viewcode-block" id="TabSaver.ager_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.ager_save">[docs]</a>    <span class="k">def</span> <span class="nf">ager_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial age profile to the subfolder ``a.T[&#39;age&#39;]``. </span>
<span class="sd">        File name base is ``&#39;Age&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Radial age profiles. Tables contain only age profiles,</span>
<span class="sd">            without the radial grid column ``a.R``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Age(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">zlim</span><span class="p">))</span><span class="o">/</span><span class="mf">1e3</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Age(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">dz</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>                        
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">profiles</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">out</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &lt;age&gt;[Gyr] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at |z| = &#39;</span><span class="p">,</span>
                                   <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span>               </div>
    
        
<div class="viewcode-block" id="TabSaver.metz_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.metz_save">[docs]</a>    <span class="k">def</span> <span class="nf">metz_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical netallicity profile to the subfolder ``a.T[&#39;met&#39;]``. </span>
<span class="sd">        File name base is ``&#39;FeH&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical metallicity profiles. Can include two tables - profiles at the different R </span>
<span class="sd">            and at ``p.Rsun``, or a single table with the local profile. Tables contain only metalllicity </span>
<span class="sd">            profiles, without the vertical grid column ``a.z``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>  
        
        <span class="n">only_local</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;R&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">:</span>
            <span class="n">only_local</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;FeH(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)z_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;FeH(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)z_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">fehzr</span><span class="p">,</span><span class="n">fehzr0</span> <span class="o">=</span> <span class="n">profiles</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fehzr0</span> <span class="o">=</span> <span class="n">profiles</span>
            
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">fehzr</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>                   
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &lt;[Fe/H]&gt; (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for R = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span>
                                           <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span><span class="s1">&#39;] kpc with step = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">fehzr0</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &lt;[Fe/H]&gt; (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span>        
                   <span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>                                   </div>
                                   
        
<div class="viewcode-block" id="TabSaver.metr_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.metr_save">[docs]</a>    <span class="k">def</span> <span class="nf">metr_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial metallicity profile to the subfolder ``a.T[&#39;met&#39;]``. </span>
<span class="sd">        File name base is ``&#39;FeH&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Radial metallicity profiles. Tables contain only metallicity profiles,</span>
<span class="sd">            without the radial grid column ``a.R``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;FeH(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">zlim</span><span class="p">))</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;FeH(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>                        
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">profiles</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">out</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &lt;[Fe/H]&gt; (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span>
                                           <span class="s1">&#39;) at |z| = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span>                   </div>
                                       

<div class="viewcode-block" id="TabSaver.agehist_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.agehist_save">[docs]</a>    <span class="k">def</span> <span class="nf">agehist_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ages</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves age distributions for the different Galactocentric distances </span>
<span class="sd">        to the subfolder ``a.T[&#39;age&#39;]``. File name base is ``&#39;f(age)&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param ages: Can contain two tables - age distributions for the grid ``a.R`` and at ``p.Rsun``, </span>
<span class="sd">            or only a single age distribution for the local volume. Tables contain only age distributions,</span>
<span class="sd">            without the time(age) grid column ``a.t``. </span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">only_local</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;R&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">:</span>
            <span class="n">only_local</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;f(age)(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;_z[&#39;</span><span class="p">,</span>
                             <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;f(age)(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;cumulative&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cumulative&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span> <span class="o">+</span> <span class="n">savepath0</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span> <span class="o">+</span> <span class="n">savepath</span>            
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>  
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>       
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>  
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>            
        <span class="k">if</span> <span class="s1">&#39;sigma_gauss&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_sig&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma_gauss&#39;</span><span class="p">])</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39; x Gauss(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma_gauss&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;[Gyr])&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>      
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_sig&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma_gauss&#39;</span><span class="p">])</span>
                
        <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>   
            <span class="n">ages0</span> <span class="o">=</span> <span class="n">ages</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ages</span><span class="p">,</span> <span class="n">ages0</span> <span class="o">=</span> <span class="n">ages</span>
            
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ages</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>                   
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], fraction (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span>
                                           <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span><span class="s1">&#39;] kpc with step = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc and |z| = &#39;</span><span class="p">,</span>
                                           <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">ages0</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>                   
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], fraction (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span>
                                       <span class="s1">&#39; kpc and |z| = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span>                                   </div>
        
            
<div class="viewcode-block" id="TabSaver.methist_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.methist_save">[docs]</a>    <span class="k">def</span> <span class="nf">methist_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mets</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves metallicity distributions for the different Galactocentric distances </span>
<span class="sd">        to the subfolder ``a.T[&#39;met&#39;]``. File name base is ``&#39;f(FeH)&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param mets: Can contain two tables - metallicity distributions for the grid ``a.R`` and at ``p.Rsun``, </span>
<span class="sd">            or only a single metallicity distribution for the local volume. Also, </span>
<span class="sd">            metallicity column must be added after the tables. </span>
<span class="sd">        :type mets: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">only_local</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;R&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">:</span>
            <span class="n">only_local</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;f(FeH)(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;_z[&#39;</span><span class="p">,</span>
                             <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;f(FeH)(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="s1">&#39;cumulative&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cumulative&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span> <span class="o">+</span> <span class="n">savepath0</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span> <span class="o">+</span> <span class="n">savepath</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>  
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>            
        <span class="k">if</span> <span class="s1">&#39;sigma_gauss&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_sig&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma_gauss&#39;</span><span class="p">])</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39; x Gauss(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma_gauss&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>                
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_sig&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sigma_gauss&#39;</span><span class="p">])</span>
        
        <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">metdist0</span><span class="p">,</span> <span class="n">metbinsc</span> <span class="o">=</span> <span class="n">mets</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">metdist</span><span class="p">,</span> <span class="n">metdist0</span><span class="p">,</span> <span class="n">metbinsc</span> <span class="o">=</span> <span class="n">mets</span>
            
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">metbinsc</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">metbinsc</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">metdist</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;[Fe/H], fraction (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span>
                                           <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span><span class="s1">&#39;] kpc with step = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc and |z| = &#39;</span><span class="p">,</span>
                                           <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;met&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">metbinsc</span><span class="p">,</span><span class="n">metdist0</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;[Fe/H], fraction (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span>
                                       <span class="s1">&#39; kpc and |z| = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">)))</span>                                   </div>
                                   
    
<div class="viewcode-block" id="TabSaver.hr_monoage_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.hr_monoage_save">[docs]</a>    <span class="k">def</span> <span class="nf">hr_monoage_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">ages</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves scale heights calculated for the mono-age subpopulations for the different Galactocentric </span>
<span class="sd">        distances. Output subfolder is ``a.T[&#39;height&#39;]``. File name base is ``&#39;H&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param H: Table with scale heights (radial profiles in columns, age changes from column to column). </span>
<span class="sd">            Radial grid ``a.R`` is not included into **H**.</span>
<span class="sd">        :type H: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thin+thick disk, or total). Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param ages: Set of age bins, Gyr.</span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_age[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                                  <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]&#39;</span><span class="p">))</span>                                                     
        <span class="k">if</span> <span class="s1">&#39;between&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;between&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;sgl&#39;</span>
        <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;height&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;height&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">H</span><span class="p">)),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], h[pc] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for ages = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                       <span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] Gyr with step = &#39;</span><span class="p">,</span>
                                       <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39; Gyr&#39;</span><span class="p">)))</span></div>
        
        
<div class="viewcode-block" id="TabSaver.hr_monomet_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.hr_monomet_save">[docs]</a>    <span class="k">def</span> <span class="nf">hr_monomet_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">mets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves scale heights calculated for the mono-metallicity subpopulations (bins) </span>
<span class="sd">        for the different Galactocentric distances. Output subfolder is ``a.T[&#39;height&#39;]``. </span>
<span class="sd">        File name base is ``&#39;H&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param H: Table with scale heights (radial profiles in columns, metallicity changes </span>
<span class="sd">            from column to column). Radial grid ``a.R`` is not included into **H**.</span>
<span class="sd">        :type H: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thin+thick disk, or total). Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param mets: Set of metallicity bins.</span>
<span class="sd">        :type mets: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;H(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_FeH[&#39;</span><span class="p">,</span>
                                                <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                                <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;height&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;height&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">H</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], h[pc] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for [Fe/H] = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span>
                                   <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;] with step = &#39;</span><span class="p">,</span>
                                   <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)))))</span></div>

    
<div class="viewcode-block" id="TabSaver.sigwz_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.sigwz_save">[docs]</a>    <span class="k">def</span> <span class="nf">sigwz_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical profile of W velocity dispersion to the subfolder ``a.T[&#39;kinem&#39;]``. </span>
<span class="sd">        File name base is ``&#39;SigW&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Velocity dispersion profiles. Can include two tables - profiles at the different R </span>
<span class="sd">            and at ``p.Rsun``, or a single table with the local profile. Tables contain only </span>
<span class="sd">            velocity dispersion profiles, without the vertical grid column ``a.z``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thin+thick disk, or total). </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">only_local</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;R&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">:</span>
            <span class="n">only_local</span> <span class="o">=</span> <span class="kc">True</span>
            
        <span class="n">savepath0</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SigW(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)z_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>          
        <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SigW(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)z_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
                       
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath0</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
        
        <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
            <span class="n">sigwz0</span> <span class="o">=</span> <span class="n">profiles</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sigwz</span><span class="p">,</span> <span class="n">sigwz0</span> <span class="o">=</span> <span class="n">profiles</span>
            
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                         <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_local</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">sigwz</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &lt;sigma_W&gt;[km/s] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at R = [&#39;</span><span class="p">,</span>
                                           <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span><span class="s1">&#39;] kpc with step = &#39;</span><span class="p">,</span>
                                           <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">sigwz0</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>                   
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &lt;sigma_W&gt;[km/s] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span>
                                       <span class="s1">&#39;) at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span></div>
        
    
<div class="viewcode-block" id="TabSaver.sigwr_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.sigwr_save">[docs]</a>    <span class="k">def</span> <span class="nf">sigwr_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial W-velocity dispersion profiles to the subfolder ``a.T[&#39;kinem&#39;]``. </span>
<span class="sd">        File name base is ``&#39;SigW&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Radial velocity dispersion profiles. Tables contain only kinematics,</span>
<span class="sd">            without the radial grid column ``a.R``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thin+thick disk, or total). Adds suffix ``&#39;_&#39;+mode`` to the file name.             </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SigW(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">zlim</span><span class="p">))</span><span class="o">/</span><span class="mf">1e3</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SigW(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span> 
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">profiles</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
                
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">out</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &lt;sigma_W&gt;[km/s] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) at |z| = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] pc&#39;</span><span class="p">)))</span>                      </div>
        
        
<div class="viewcode-block" id="TabSaver.sigwr_monoage_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.sigwr_monoage_save">[docs]</a>    <span class="k">def</span> <span class="nf">sigwr_monoage_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">,</span><span class="n">ages</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial W-velocity dispersion profiles calculated for the mono-age subpopulations. </span>
<span class="sd">        Output subfolder is ``a.T[&#39;kinem&#39;]``. File name base is ``&#39;SigW&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Radial velocity dispersion profiles (ages change from column to column). </span>
<span class="sd">            Tables contain only kinematics, without the radial grid column ``a.R``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thin+thick disk, or total). Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        :param ages: Set of age bins, Gyr.</span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SigW(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span>                              
                            <span class="s1">&#39;]_age[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>                                                          
                            <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;between&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;between&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;sgl&#39;</span>  
        <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="p">)),</span>           
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &lt;sigma_W&gt;[km/s] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for ages = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] Gyr with step = &#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ages</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39; Gyr at |z| = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] pc&#39;</span><span class="p">)))</span></div>
                               
        
<div class="viewcode-block" id="TabSaver.sigwr_monomet_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.sigwr_monomet_save">[docs]</a>    <span class="k">def</span> <span class="nf">sigwr_monomet_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">zlim</span><span class="p">,</span><span class="n">mets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves radial W-velocity dispersion profiles calculated for the mono-metallicity subpopulations (bins). </span>
<span class="sd">        Output subfolder is ``a.T[&#39;kinem&#39;]``. File name base is ``&#39;SigW&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Radial velocity dispersion profiles (metallicity changes from column to column). </span>
<span class="sd">            Tables contain only kinematics, without the radial grid column ``a.R``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thin+thick disk, or total). Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param zlim: Range of heights to be considered, pc. Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        :param ages: Set of metallicity bins.</span>
<span class="sd">        :type ages: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SigW(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)R_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span>                                                                    
                            <span class="s1">&#39;]_FeH[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span>
                            <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>           
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &lt;sigma_W&gt;[km/s] (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;) for [Fe/H] = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">mets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39;] with step = &#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mets</span><span class="p">)),</span><span class="mi">3</span><span class="p">)),</span><span class="s1">&#39; at |z| = [&#39;</span><span class="p">,</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;] pc&#39;</span><span class="p">)))</span></div>
        
        
<div class="viewcode-block" id="TabSaver.mean_quantity_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.mean_quantity_save">[docs]</a>    <span class="k">def</span> <span class="nf">mean_quantity_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">zlim</span><span class="p">,</span><span class="n">quantity</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves vertical profiles of some quantity calculated based on the stellar assemblies. </span>
<span class="sd">        Output subfolder is ``a.T[&#39;pop&#39;]``. File name base is ``&#39;Mean_&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Vertical profiles of **quantity**. </span>
<span class="sd">            Tables do not contain vertical grid ``a.z``. </span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">            Adds suffix ``&#39;_&#39;+mode`` to the file name. </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param zlim: Range of heights to be considered [*zmin,zmax*], pc. </span>
<span class="sd">            Adds to the file name suffix ``&#39;_z&#39;`` </span>
<span class="sd">            with the given heights (converted for shortness into kpc). </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        :param quantity: Name of the column in a stellar assemblies table for which </span>
<span class="sd">            the profile was calculated; use ``&#39;sigw&#39;`` for velocity dispersion, </span>
<span class="sd">            ``&#39;age``` for age, and ``&#39;FeH&#39;`` for metallicity. </span>
<span class="sd">        :type quantity: str</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>         
        
        <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;age&#39;</span> <span class="ow">or</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;FeH&#39;</span> <span class="ow">or</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;sigw&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;age&#39;</span><span class="p">:</span>
                <span class="n">Q3</span> <span class="o">=</span> <span class="s1">&#39;&lt;age&gt;[Gyr]&#39;</span>
            <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;FeH&#39;</span><span class="p">:</span>
                <span class="n">Q3</span> <span class="o">=</span> <span class="s1">&#39;&lt;[Fe/H]&gt;&#39;</span>
            <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;sigw&#39;</span><span class="p">:</span>
                <span class="n">Q3</span> <span class="o">=</span> <span class="s1">&#39;&lt;sigma_W&gt;[km/s]&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Q3</span> <span class="o">=</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="n">quantity</span> <span class="o">+</span> <span class="s1">&#39;&gt;[same units as in the stellar assemblies tables]&#39;</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Mean_&#39;</span><span class="p">,</span><span class="n">quantity</span><span class="p">,</span><span class="s1">&#39;_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39;_z&#39;</span><span class="p">,</span>
                                         <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>                        
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;tab&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]],</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span>
                                     <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]],</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span>
                                    <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|z|[pc], &#39;</span><span class="p">,</span><span class="n">Q3</span><span class="p">,</span><span class="s1">&#39; (&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;), R = &#39;</span><span class="p">,</span>
                                       <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39; kpc, |z| =&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39;pc&#39;</span><span class="p">)))</span></div>
            
        
<div class="viewcode-block" id="TabSaver.pops_in_volume_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.pops_in_volume_save">[docs]</a>    <span class="k">def</span> <span class="nf">pops_in_volume_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">mode_pop_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves table(s) with number densities of stellar assemblies for some volume.</span>
<span class="sd">        Output subfolder is ``a.T[&#39;pop&#39;]``. File name base is ``&#39;SSP_R&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param table: Saves stellar assemblies table(s) with a column ``&#39;Nz&#39;`` containing the number </span>
<span class="sd">            of stars located in the specified volume (described by parameter ``&#39;vln&#39;`` in *kwargs*  </span>
<span class="sd">            of the class instance). Can be a single table or a list of tables, depending on **mode**. </span>
<span class="sd">            Output of :func:`jjmodel.analysis.pops_in_volume`. </span>
<span class="sd">        :type table: astropy table or list[astropy table]</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param R: Galactocentric distance, kpc. Suffix ``&#39;_R&#39;`` with the given value of radis </span>
<span class="sd">            is added to the output file name. </span>
<span class="sd">        :type R: scalar</span>
<span class="sd">        :param mode_pop_name: Short name of the population (see :func:`jjmodel.iof.tab_reader`) </span>
<span class="sd">            or any custom name for the table. </span>
<span class="sd">        :type mode_pop_name: str </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">mode_iso</span> <span class="o">=</span> <span class="s1">&#39;Padova&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;mode_iso&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">mode_iso</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_iso&#39;</span><span class="p">]</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;SSP_R&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">)))</span>
        <span class="k">if</span> <span class="s1">&#39;vln&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;vln&#39;</span><span class="p">]</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_volume&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">savedir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">pn</span><span class="p">[</span><span class="n">mode_pop_name</span><span class="p">],</span><span class="s1">&#39;tab&#39;</span><span class="p">))</span>
            <span class="n">tabname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="n">mode_pop_name</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span> 
            <span class="n">savedir</span> <span class="o">=</span> <span class="s1">&#39;poptab&#39;</span>
            <span class="n">tabname</span> <span class="o">=</span> <span class="n">mode_pop_name</span>
        <span class="k">if</span> <span class="n">mode</span><span class="o">!=</span><span class="s1">&#39;dt&#39;</span> <span class="ow">and</span> <span class="n">mode</span><span class="o">!=</span><span class="s1">&#39;tot&#39;</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
            <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
            <span class="n">savepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">savedir</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;.csv&#39;</span><span class="p">)))</span> 
            <span class="n">table</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">savepath</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath_d</span> <span class="o">=</span> <span class="n">savepath</span> <span class="o">+</span> <span class="s1">&#39;_d&#39;</span>
            <span class="n">savepath_t</span> <span class="o">=</span> <span class="n">savepath</span> <span class="o">+</span> <span class="s1">&#39;_t&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">savepath_d</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
                <span class="n">savepath_t</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">savepath_d</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
                <span class="n">savepath_t</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
            <span class="n">savepath_d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">savedir</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath_d</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;.csv&#39;</span><span class="p">)))</span> 
            <span class="n">savepath_t</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">savedir</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath_t</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;.csv&#39;</span><span class="p">)))</span> 
            <span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">savepath_d</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">savepath_t</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mode</span><span class="o">==</span><span class="s1">&#39;tot&#39;</span><span class="p">:</span>
                <span class="n">savepath_sh</span> <span class="o">=</span> <span class="n">savepath</span> <span class="o">+</span> <span class="s1">&#39;_sh&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">savepath_sh</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">savepath_sh</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
                <span class="n">savepath_sh</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">savedir</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath_sh</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;.csv&#39;</span><span class="p">)))</span> 
                <span class="n">table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">savepath_sh</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
    
        
<div class="viewcode-block" id="TabSaver.rz_map_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rz_map_save">[docs]</a>    <span class="k">def</span> <span class="nf">rz_map_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves R-z map of some **quantity**.  </span>
<span class="sd">        Output subfolder is ``a.T[&#39;maps&#39;]``. File name is ``&#39;Rho&#39;``, ``&#39;N&#39;``, ``&#39;Sigma&#39;``, </span>
<span class="sd">        or ``&#39;SigmaN&#39;``, depending on *kwargs* of the class instance. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Map of stellar mass or number density in R-z Galactic coordinates.</span>
<span class="sd">        :type profiles: 2d-array</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Q0</span><span class="p">,</span><span class="s1">&#39;Rz_dz&#39;</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>     
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="n">dz</span> <span class="o">=</span> <span class="s1">&#39;0.1&#39;</span>                   
        <span class="k">if</span> <span class="s1">&#39;dz&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">dz</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dz&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span> <span class="c1"># in kpc</span>
        <span class="n">savepath</span> <span class="o">+=</span> <span class="n">dz</span>
        <span class="n">headname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Q1</span><span class="p">,</span><span class="s1">&#39;/[&#39;</span><span class="p">,</span><span class="n">dz</span><span class="p">,</span><span class="s1">&#39; kpc x &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc] (&#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;)&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;ages&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_age&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])</span>
            <span class="n">headname</span> <span class="o">+=</span> <span class="s1">&#39; for age = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; Gyr&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;mets&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_FeH&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])</span>
            <span class="n">headname</span> <span class="o">+=</span> <span class="s1">&#39; for [Fe/H] = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])</span>
        <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;maps&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;maps&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span>
                       <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span><span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="n">headname</span><span class="p">)</span></div>
                   
    
<div class="viewcode-block" id="TabSaver.rz_map_quantity_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.rz_map_quantity_save">[docs]</a>    <span class="k">def</span> <span class="nf">rz_map_quantity_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">quantity</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves R-z map of some **quantity**.  </span>
<span class="sd">        Output subfolder is ``a.T[&#39;maps&#39;]``. File name begins with **quantity**. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Map of the chosen **quantity** in R-z Galactic coordinates.</span>
<span class="sd">        :type profiles: 2d-array</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param quantity: Name of the column in a stellar assemblies table to which </span>
<span class="sd">            the function has to be applied; for velocity dispersion use ``&#39;sigw&#39;``, </span>
<span class="sd">            ``&#39;age``` for age, and ``&#39;FeH&#39;`` for metallicity. </span>
<span class="sd">        :type quantity: str</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">quantity</span><span class="p">,</span><span class="s1">&#39;(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)Rz_dz&#39;</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="n">dz</span> <span class="o">=</span> <span class="s1">&#39;0.1&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;dz&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">dz</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dz&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span> <span class="c1"># in kpc</span>
        <span class="n">savepath</span> <span class="o">+=</span> <span class="n">dz</span>
        <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;units&#39;</span>
        <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;age&#39;</span><span class="p">:</span>
            <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;Gyr&#39;</span>
        <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;FeH&#39;</span><span class="p">:</span>
            <span class="n">units</span><span class="o">=</span><span class="s1">&#39;dex&#39;</span>
        <span class="k">if</span> <span class="n">quantity</span><span class="o">==</span><span class="s1">&#39;sigw&#39;</span><span class="p">:</span>
            <span class="n">quantity</span> <span class="o">=</span> <span class="s1">&#39;sigma_W&#39;</span>
            <span class="n">units</span><span class="o">=</span><span class="s1">&#39;km/s&#39;</span>
        <span class="n">headname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">quantity</span><span class="p">,</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="n">units</span><span class="p">,</span><span class="s1">&#39; / &#39;</span><span class="p">,</span><span class="n">dz</span><span class="p">,</span><span class="s1">&#39; pc x &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc] (&#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;)&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;ages&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_age&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])</span>
            <span class="n">headname</span> <span class="o">+=</span> <span class="s1">&#39; for age = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; Gyr&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;mets&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_FeH&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])</span>
            <span class="n">headname</span> <span class="o">+=</span> <span class="s1">&#39; for [Fe/H] = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])</span>
        <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;maps&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;maps&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="n">headname</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="TabSaver.fw_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.fw_save">[docs]</a>    <span class="k">def</span> <span class="nf">fw_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">zlim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves W-velocity dostribution function. </span>
<span class="sd">        Output subfolder is ``a.T[&#39;kinem&#39;]``. File name base is ``&#39;f(|W|)&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Normalized on area W-velocity distribution (histogram) and W-grid (bin centers), </span>
<span class="sd">            :math:`\mathrm{km \ s^{-1}}`. </span>
<span class="sd">        :type profiles: [1d-array, 1d-array]</span>
<span class="sd">        :type profiles: array-like</span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total).</span>
<span class="sd">        :type mode_comp: str</span>
<span class="sd">        :param R: Galactocentric distance, kpc. </span>
<span class="sd">        :type R: scalar </span>
<span class="sd">        :param zlim: Range of heights [*zmin,zmax*], pc. </span>
<span class="sd">        :type zlim: array-like </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;f(|W|)(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w0</span><span class="p">,</span><span class="s1">&#39;)&#39;</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="o">==</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_R[&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">R</span><span class="p">)))</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_R&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_z[&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">zlim</span><span class="p">))</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;]&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_z[&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;]&#39;</span>                                
        <span class="k">if</span> <span class="s1">&#39;ages&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_age[&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span>\
                            <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span>\
                            <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])),</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_age[&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span>\
                            <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39; for age = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ages&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; Gyr&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;mets&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_FeH[&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span>\
                            <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span>\
                            <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])),</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_FeH[&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span>\
                            <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39; for [Fe/H] = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mets&#39;</span><span class="p">])</span>
        <span class="n">savepath</span> <span class="o">+=</span>  <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">])</span><span class="o">==</span><span class="nb">list</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
            
        <span class="n">fw</span><span class="p">,</span> <span class="n">wgrid</span> <span class="o">=</span> <span class="n">profiles</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;|W|[km/s], f(|W|)(&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39;), R = &#39;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s1">&#39; kpc, |z| =&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39; pc&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
            <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;kin&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">wgrid</span><span class="p">,</span><span class="n">fw</span><span class="p">),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span><span class="n">header</span><span class="o">=</span><span class="n">headname</span><span class="p">)</span></div>
               
                    
<div class="viewcode-block" id="TabSaver.hess_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.hess_save">[docs]</a>    <span class="k">def</span> <span class="nf">hess_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">mode_geom</span><span class="p">,</span><span class="n">bands</span><span class="p">,</span><span class="n">mag_range</span><span class="p">,</span><span class="n">mag_step</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hess diagram for the simple volumes. </span>
<span class="sd">        Output subfolder is ``a.T[&#39;hess&#39;]``. File name base is ``&#39;Hess_&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profiles: Hess diagram, output of :func:`jjmodel.analysis.hess_simple`.  </span>
<span class="sd">        :type profiles: 2d-array </span>
<span class="sd">        :param mode: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total).</span>
<span class="sd">        :type mode: str</span>
<span class="sd">        :param mode_geom: Modeled geometry. Can be ``&#39;local_sphere&#39;``, ``&#39;local_cylinder&#39;``, or ``&#39;rphiz_box&#39;``. </span>
<span class="sd">        :type mode_geom: str</span>
<span class="sd">        :param bands: List of names of photometric columns. </span>
<span class="sd">            Three column names must be given, e.g. ``[&#39;B&#39;,&#39;V&#39;,&#39;V&#39;]`` for (*B-V*) versus :math:`M_\mathrm{V}`. </span>
<span class="sd">        :type bands: list[str]</span>
<span class="sd">        :param mag_range: Minimal and maximal magnitude along the x- and y-axis of the Hess </span>
<span class="sd">            diagram, [[*x_min,x_max*],[*y_min,y_max*]]. </span>
<span class="sd">        :type mag_range: list[list[scalar]]</span>
<span class="sd">        :param mag_step: Step along the x- and y-axis of the Hess diagram, [*dx,dy*]. </span>
<span class="sd">        :type mag_step: array-like</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;Hess_(&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;)_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_geom</span><span class="p">,</span><span class="s1">&#39;_in[&#39;</span><span class="p">,</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">mag_range</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mag_range</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mag_step</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;;&#39;</span><span class="p">,</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">mag_range</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mag_range</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mag_step</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="s1">&#39;]&#39;</span><span class="p">))</span>                                                 
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>    
        <span class="k">if</span> <span class="s1">&#39;vln&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;vln&#39;</span><span class="p">]</span>  
        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39; in &#39;</span> <span class="o">+</span> <span class="n">mode_geom</span>
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;hess&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;hess&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                   <span class="n">profiles</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;N / [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mag_step</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s1">&#39; mag x &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mag_step</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                              <span class="s1">&#39; mag] in (&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39; - &#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="n">bands</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                              <span class="s1">&#39;) for &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">)))</span>                                             </div>
                                   
                          
<div class="viewcode-block" id="TabSaver.disk_brightness_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.disk_brightness_save">[docs]</a>    <span class="k">def</span> <span class="nf">disk_brightness_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">profiles</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">mode_geom</span><span class="p">,</span><span class="n">band</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves surface brightness or colour profile of the MW if it is viewed </span>
<span class="sd">        edge-on or face-on. Output subfolder is ``a.T[&#39;pop&#39;]``. File name base is ``&#39;MagR_&#39;``. </span>
<span class="sd">        </span>
<span class="sd">        :param profile: Disk surface brightness profile (:math:`\mathrm{mag \ arcsec^{-2}}`) or color </span>
<span class="sd">            profile (mag), output of :func:`jjmodel.analysis.disk_brightness`.  </span>
<span class="sd">        :type profile: 1d-array</span>
<span class="sd">        :param mode_comp: Galactic component, can be ``&#39;d&#39;``, ``&#39;t&#39;``, ``&#39;sh&#39;``, ``&#39;dt&#39;``, or ``&#39;tot&#39;`` </span>
<span class="sd">            (thin disk, thick disk, halo, thin+thick disk, or total). </span>
<span class="sd">        :type mode_comp: str</span>
<span class="sd">        :param mode_geom: Modeled geometry. Disk orientation with respect to the observer: </span>
<span class="sd">            ``&#39;face-on&#39;`` or ``&#39;edge-on&#39;``. </span>
<span class="sd">        :type mode_geom: str</span>
<span class="sd">        :param bands: If a string, this parameter corresponds to the band for the surface brightness profile. </span>
<span class="sd">            If it is a list, then **bands** gives the names of two bands to be used for the color profile - e.g. </span>
<span class="sd">            ``[&#39;U&#39;,&#39;V&#39;]`` for *U-V*.</span>
<span class="sd">        :type bands: str or list</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">mode_iso</span> <span class="o">=</span> <span class="s1">&#39;Padova&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;mode_iso&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">mode_iso</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_iso&#39;</span><span class="p">]</span>
        <span class="n">zlim</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">zmax</span><span class="p">]</span>     
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">!=</span><span class="nb">str</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">band</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
            <span class="n">quantity</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">bands</span><span class="p">,</span><span class="s1">&#39;[mag]&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="n">band</span>
            <span class="n">quantity</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;mu_&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">,</span><span class="s1">&#39;[mag/arcsec^2]&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">mode_geom</span><span class="o">==</span><span class="s1">&#39;face-on&#39;</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;MagR_&#39;</span><span class="p">,</span><span class="n">mode_geom</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>                             
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;zlim&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="n">zlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;zlim&#39;</span><span class="p">]</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;MagR_&#39;</span><span class="p">,</span><span class="n">mode_geom</span><span class="p">,</span><span class="s1">&#39;_z[&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span>
                             <span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">1e3</span><span class="p">),</span><span class="s1">&#39;]_&#39;</span><span class="p">,</span><span class="n">bands</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">mode</span><span class="p">))</span>                                 
        <span class="k">if</span> <span class="s1">&#39;mode_pop&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mode_pop&#39;</span><span class="p">]]</span> 
        <span class="k">if</span> <span class="s1">&#39;tab&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;_tab&#39;</span> 
            <span class="n">label</span> <span class="o">+=</span> <span class="s1">&#39;, custom population&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;fig&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir2</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt2</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">))],</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">savepath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">profiles</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> 
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;R[kpc], &#39;</span><span class="p">,</span><span class="n">quantity</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">mode_geom</span><span class="p">,</span><span class="s1">&#39; at z = &#39;</span><span class="p">,</span>
                                       <span class="nb">str</span><span class="p">(</span><span class="n">zlim</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                                       <span class="s1">&#39; pc calculated with &#39;</span><span class="p">,</span><span class="n">mode_iso</span><span class="p">,</span><span class="s1">&#39; isochrones&#39;</span><span class="p">)))</span>                                                           </div>
        
<div class="viewcode-block" id="TabSaver.input_local_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.input_local_save">[docs]</a>    <span class="k">def</span> <span class="nf">input_local_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves a set of the local model input data: SFR, mass loss function, and AMR </span>
<span class="sd">        (for the thin and thick disk). </span>
<span class="sd">        The output directory is ``a.T[&#39;inp&#39;]``, and file names are prescribed by :func:`jjmodel.iof.tab_sorter`. </span>
<span class="sd">        </span>
<span class="sd">        :param inp: Collection of the input functions including SFR, AVR, AMR, and IMF.</span>
<span class="sd">        :type inp: dict   </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">p</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="c1"># SFR</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SFRd0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SFRd0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_thin.d[Msun/pc^2/Gyr]&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;NSFRd0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;NSFRd0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_thin.d/&lt;SFR_thin.d&gt;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pkey</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Fp0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;Fp0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_thin.d peak(s) fraction&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SFRt0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">[:</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">],</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SFRt0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_thick.d[Msun/pc^2/Gyr]&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;NSFRt&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">[:</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">],</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;NSFRt0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_thick.d/&lt;SFR_thick.d&gt;&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SFRtot0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SFRtot0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_tot[Msun/pc^2/Gyr]&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;NSFRtot0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;NSFRtot0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_tot/&lt;SFR_tot&gt;&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;gd0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;gd0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], fraction_in_stars&amp;remnants_thin.d&#39;</span><span class="p">)</span> 
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;gt&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">[:</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">],</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], fraction_in_stars&amp;remnants_thick.d&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;AMRd0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;AMRd0&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], [Fe/H]_thin.d&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;AMRt&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">[:</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">],</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;AMRt&#39;</span><span class="p">][:</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], [Fe/H]_thick.d&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Input data saved.&#39;</span><span class="p">)</span></div>
        
             
<div class="viewcode-block" id="TabSaver.output_local_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.output_local_save">[docs]</a>    <span class="k">def</span> <span class="nf">output_local_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">out</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves a set of the local model output data: AVR, scale heights for all model components, </span>
<span class="sd">        vertical potential, force, and density profiles.  </span>
<span class="sd">        The output directory and file name for each quantity are prescribed by :func:`jjmodel.iof.tab_sorter` </span>
<span class="sd">        and :meth:`jjmodel.iof.TabSaver.rhoz_save` (for density profiles). </span>
<span class="sd">        </span>
<span class="sd">        :param out: Output of :func:`jjmodel.mwdisk.local_run`.</span>
<span class="sd">        :type out: dict</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">p</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="c1"># Vertical density profiles     </span>
        <span class="n">rhoz0_profiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;rhodtot&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;rhog1&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;rhog2&#39;</span><span class="p">],</span>
                                  <span class="n">out</span><span class="p">[</span><span class="s1">&#39;rhot&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;rhodh&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;rhosh&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rhoz_save</span><span class="p">(</span><span class="n">rhoz0_profiles</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">)</span>
        
        <span class="c1"># Kinematics</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;AVR0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;avr&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], sigma_W[km/s]&#39;</span><span class="p">)</span>
        
        <span class="c1"># Scale heights</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Heffd0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(([</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">],[</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;heffd&#39;</span><span class="p">]]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h_eff[pc]_thin.d&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hd0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;hd&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], h[pc]_thin.d&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pkey</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hdp0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;sigp&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;hdp&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;sigma_W[km/s], h[pc]_thin.dp&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Ht0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(([</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">],[</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;ht&#39;</span><span class="p">]]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_thick.d&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hsh0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(([</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">],[</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;hsh&#39;</span><span class="p">]]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_st.halo&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hdh0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(([</span><span class="n">p</span><span class="o">.</span><span class="n">Rsun</span><span class="p">],[</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;hdh&#39;</span><span class="p">]]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_DM&#39;</span><span class="p">)</span>
        
        <span class="c1"># Potential and vertical force</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Phi0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;phi&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;z[pc], Phi[m^2/s^2]&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Kz0&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;Kzdtot&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;Kzg1&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;Kzg2&#39;</span><span class="p">],</span>
                                                     <span class="n">out</span><span class="p">[</span><span class="s1">&#39;Kzt&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;Kzdh&#39;</span><span class="p">],</span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;Kzsh&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;z[pc], Q_thin.d, Q_mol.g, Q_atom.gas, Q_thick.d, Q_DM, &#39;</span><span class="o">+</span>\
                           <span class="s1">&#39;Q_st.halo with Q = Kz[km^2/s^2/kpc]&#39;</span><span class="p">)</span>                             
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Output data saved.&#39;</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="TabSaver.output_extended_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.output_extended_save">[docs]</a>    <span class="k">def</span> <span class="nf">output_extended_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Same as :meth:`jjmodel.iof.TabSaver.output_local`, but for the model extending over </span>
<span class="sd">        some range of Galactocentric distances. </span>
<span class="sd">        </span>
<span class="sd">        :param res: Output of :func:`jjmodel.mwdisk.extended_run`.</span>
<span class="sd">        :type res: dict</span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">p</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="c1"># Vertical density profiles                    </span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">):</span>
            <span class="n">rhoz_profiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;rhodtot&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;rhog1&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;rhog2&#39;</span><span class="p">],</span>
                                 <span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;rhot&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;rhodh&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;rhosh&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rhoz_save</span><span class="p">(</span><span class="n">rhoz_profiles</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            
            <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Kz&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">,</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;Kzdtot&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;Kzg1&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;Kzg2&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;Kzt&#39;</span><span class="p">],</span>                                                         
                                 <span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;Kzdh&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;Kzsh&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                       <span class="n">header</span><span class="o">=</span><span class="s1">&#39;z[pc], Q_thin.d, Q_mol.g, Q_atom.gas, Q_thick.d, &#39;</span><span class="o">+</span>\
                               <span class="s1">&#39;Q_DM, Q_st.halo with Q = Kz[km^2/s^2/kpc]&#39;</span><span class="p">)</span>    
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pkey</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hdp&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;sigp&#39;</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;hdp&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>                                 
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;sigma_W[km/s], h[pc]_thin.dp&#39;</span><span class="p">)</span>
                               
        <span class="c1"># Kinematics</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;AVR&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;avr&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], sigma_W[km/s]_thin.d at R = [&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">),</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">),</span>
                                   <span class="s1">&#39;] kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Sigt&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> 
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;sigt&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], sigma_W[km/s]_thick.d&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Sigg1&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> 
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;sigg1&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], sigma_W[km/s]_mol.gas&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Sigg2&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> 
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;sigg2&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], sigma_W[km/s]_atom.gas&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Sige&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> 
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;sige&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], sigma_e[km/s]&#39;</span><span class="p">)</span>
        
        <span class="c1"># Scale heights</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Heffd&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;heffd&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h_eff[pc]_thin.d&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hsh&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> 
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;hsh&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_st.halo&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hdh&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> 
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,[</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;hdh&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_DM&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hd&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;hd&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], h[pc]_thin.d at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span>
                                   <span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Ht&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;ht&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">])),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>                               
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_thick.d&#39;</span><span class="p">)</span>
        <span class="c1"># Potential </span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Phi&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;phi&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">R_array</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span> 
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;z[pc], Phi[m^2/s^2] at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span>
                                   <span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Output data saved.&#39;</span><span class="p">)</span></div>
        
    
<div class="viewcode-block" id="TabSaver.input_extended_save"><a class="viewcode-back" href="../../iof.html#jjmodel.iof.TabSaver.input_extended_save">[docs]</a>    <span class="k">def</span> <span class="nf">input_extended_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Same as :meth:`jjmodel.iof.TabSaver.input_local`, but for the model extending over </span>
<span class="sd">        some range of Galactocentric distances. </span>
<span class="sd">        </span>
<span class="sd">        :param inp: Collection of the input functions including SFR, AVR, AMR, and IMF.</span>
<span class="sd">        :type inp: dict   </span>
<span class="sd">        </span>
<span class="sd">        :return: None. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">p</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="c1"># Input data</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SFRd&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SFRd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], SFR_thin.d[Msun/pc^2/Gyr] at R = &#39;</span><span class="p">,</span>
                                   <span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span><span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;NSFRd&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;NSFRd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], SFR_thin.d/&lt;SFR_thin.d&gt; at R = &#39;</span><span class="p">,</span>
                                   <span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span><span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pkey</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">):</span>
                <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Fp&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;Fp&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], SFR_thin.d peak(s) fraction&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SFRt&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="p">[:</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jt</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SFRt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], SFR_thick.d[Msun/pc^2/Gyr] at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span>
                                   <span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SFRtot&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SFRtot&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], SFR_tot[Msun/pc^2/Gyr] at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span>
                                   <span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;NSFRtot&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;NSFRtot&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], SFR_tot/&lt;SFR_tot&gt; at R = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span>
                                   <span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;AMRd&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;AMRd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s1">&#39;t[Gyr], [Fe/H]_thin.d at R = &#39;</span><span class="p">,</span>
                                   <span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">]),</span><span class="s1">&#39; kpc with step dR = &#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">),</span><span class="s1">&#39; kpc&#39;</span><span class="p">)))</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;SR&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">Rbins</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;SigmaR&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>                  
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], Q_thin.d, Q_mol.g, Q_atom.g, Q_thick.d, &#39;</span><span class="o">+</span>\
                           <span class="s1">&#39;Q_DM, Q_st.halo with Q = Sigma[Msun/pc^2]&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hg1&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;hg1&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_mol.gas&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;Hg2&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">R</span><span class="p">,</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;hg2&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;R[kpc], h[pc]_atom.gas&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">tab_sorter</span><span class="p">(</span><span class="s1">&#39;gd&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">jd</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">inp</span><span class="p">[</span><span class="s1">&#39;gd&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span>
                   <span class="n">header</span><span class="o">=</span><span class="s1">&#39;t[Gyr], fraction_in_stars&amp;remnants_thin.d at R = &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">Rmin</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Rmax</span><span class="p">])</span>
                           <span class="o">+</span><span class="s1">&#39; kpc with step dR = &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dR</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; kpc&#39;</span><span class="p">)</span> 
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Input data saved.&#39;</span><span class="p">)</span></div></div>
        
        

    
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">jjmodel</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../funcs.html">Physical functions (input)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model_core.html">Radial and vertical MW structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../populations.html">Stellar populations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trans.html">Coordinates and velocities (from data)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools.html">Useful tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iof.html">Input/output tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analysis.html">Output analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plotting.html">Plotting tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contacts.html">Authors and contact</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Sysoliatina.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>